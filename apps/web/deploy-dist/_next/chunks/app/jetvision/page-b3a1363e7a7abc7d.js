(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[930],{48147:function(e,s,t){Promise.resolve().then(t.bind(t,44662))},44662:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return S}});var a=t(27573),r=t(7653),n=t(81869),o=t(99741),i=t(36434),d=t(99555),l=t(13168),c=t(20675),m=t(77837),x=t(74607);let u=(0,x.Z)("outline","sparkles","Sparkles",[["path",{d:"M16 18a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2zm0 -12a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2zm-7 12a6 6 0 0 1 6 -6a6 6 0 0 1 -6 -6a6 6 0 0 1 -6 6a6 6 0 0 1 6 6z",key:"svg-0"}]]);var p=t(77318);let h=(0,x.Z)("outline","send","Send",[["path",{d:"M10 14l11 -11",key:"svg-0"}],["path",{d:"M21 3l-6.5 18a.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a.55 .55 0 0 1 0 -1l18 -6.5",key:"svg-1"}]]);var b=t(96889),g=t(13768),f=t(33955),v=t(22907),j=t(67754),y=t(20383),w=t(57434);let N=e=>{var s;let{className:t,sessionId:x,userId:N}=e,[k,S]=(0,r.useState)(""),[E,A]=(0,r.useState)(!0),I=(0,j.useRouter)(),{threadId:T}=(0,j.useParams)(),z=null!==(s=null==T?void 0:T.toString())&&void 0!==s?s:"",{handleSubmit:C}=(0,i.EU)(),{isGenerating:M,switchThread:P,createThread:K,editor:_,setEditor:Z}=(0,d.aK)((0,y.N)(e=>({isGenerating:e.isGenerating,switchThread:e.switchThread,createThread:e.createThread,editor:e.editor,setEditor:e.setEditor}))),{editor:D}=(0,i.e)({placeholder:"Ask about Apollo.io campaigns, Avinode availability, or system operations...",onInit:e=>{let{editor:s}=e;Z(s)},onUpdate:e=>{let{editor:s}=e;S(s.getText()),s.getText().length>0&&E&&A(!1)}}),O=async()=>{if(k.trim()&&!M)try{let e=z;e||(e=(await K((0,w.x0)())).id,I.push("/chat/".concat(e)));let s=new FormData;s.append("query",k.trim());let t=sessionStorage.getItem("promptParameters");t&&(s.append("parameters",t),sessionStorage.removeItem("promptParameters")),await C({formData:s,useWebSearch:!1}),D&&(D.commands.clearContent(),S("")),A(!1)}catch(s){let e=s instanceof Error?s.message:"An unexpected error occurred";(0,n.Am)({title:"Connection Error",description:e,variant:"destructive"})}},J=z&&z.length>0;return(0,r.useEffect)(()=>{let e=e=>{(e.metaKey||e.ctrlKey)&&"Enter"===e.key&&(e.preventDefault(),O()),(e.metaKey||e.ctrlKey)&&"k"===e.key&&(e.preventDefault(),A(!E))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[k,E]),(0,a.jsxs)("div",{className:(0,n.cn)("relative flex h-full w-full flex-col",t),children:[(0,a.jsx)("div",{className:"border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.Z,{size:24,className:"text-brand"}),(0,a.jsx)("h1",{className:"text-xl font-semibold text-foreground",children:"JetVision Agent"})]}),(0,a.jsx)("span",{className:"rounded-full bg-brand/10 px-2 py-0.5 text-xs font-medium text-brand",children:"Apollo.io + Avinode"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,a.jsx)("kbd",{className:"rounded border border-border bg-secondary px-1.5 py-0.5 font-mono",children:"⌘K"}),(0,a.jsx)("span",{children:"Show prompts"}),(0,a.jsx)("span",{className:"mx-2",children:"•"}),(0,a.jsx)("kbd",{className:"rounded border border-border bg-secondary px-1.5 py-0.5 font-mono",children:"⌘↵"}),(0,a.jsx)("span",{children:"Submit"})]})]})}),(0,a.jsx)("div",{className:"relative flex-1 overflow-y-auto",children:(0,a.jsxs)("div",{className:"mx-auto max-w-4xl p-6",children:[!J&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.M,{children:E&&(0,a.jsxs)(f.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-8 text-center",children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center justify-center gap-2",children:[(0,a.jsx)(u,{size:20,className:"text-brand"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-foreground",children:"How can JetVision Agent assist you today?"})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select a prompt card or type your own query about Apollo.io campaigns or Avinode operations"})]})}),(0,a.jsx)(g.M,{children:E&&(0,a.jsx)(f.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:(0,a.jsx)(o.t,{onSelectPrompt:(e,s,t)=>{D&&(D.commands.clearContent(),D.commands.insertContent(e),S(e),A(!1),t&&sessionStorage.setItem("promptParameters",JSON.stringify(t)),sessionStorage.setItem("fullPrompt",s),setTimeout(()=>{D.commands.focus("end"),(0,v.Id)(200)},100))}})})})]}),J&&(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(c.Thread,{})})]})}),(0,a.jsx)("div",{className:"border-t border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60","data-chat-input":"true",children:(0,a.jsxs)("div",{className:"mx-auto max-w-4xl p-4",children:[(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"relative flex-1",children:(0,a.jsxs)("div",{className:"rounded-lg border border-border bg-background shadow-sm transition-all focus-within:border-brand/50 focus-within:shadow-md",children:[(0,a.jsx)(l.Y,{editor:D,sendMessage:O,className:"px-4 py-3"}),k.length>0&&(0,a.jsxs)("div",{className:"absolute bottom-2 right-2 text-xs text-muted-foreground",children:[k.length," characters"]})]})}),(0,a.jsx)("button",{onClick:O,disabled:!k.trim()||M,className:(0,n.cn)("flex h-12 w-12 items-center justify-center rounded-lg transition-all","bg-brand text-brand-foreground hover:bg-brand/90","disabled:opacity-50 disabled:cursor-not-allowed",M&&"animate-pulse"),children:M?(0,a.jsx)(p.Z,{size:20,className:"animate-spin"}):(0,a.jsx)(h,{size:20})})]}),!E&&!J&&(0,a.jsxs)("button",{onClick:()=>A(!0),className:"mt-2 flex items-center gap-1 text-xs text-muted-foreground hover:text-brand",children:[(0,a.jsx)(b.Z,{size:12}),(0,a.jsx)("span",{children:"Show prompt suggestions"})]})]})}),J&&(0,a.jsx)(c.TableOfMessages,{})]})};var k=t(60796);function S(){let{userId:e}=(0,k.y)(),s=window.sessionStorage.getItem("jetvision-session-id")||"session-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9));return window.sessionStorage.getItem("jetvision-session-id")||window.sessionStorage.setItem("jetvision-session-id",s),(0,a.jsx)("div",{className:"h-screen w-full overflow-hidden",children:(0,a.jsx)(N,{userId:e||void 0,sessionId:s,className:"h-full"})})}}},function(e){e.O(0,[122,774,647,351,286,744],function(){return e(e.s=48147)}),_N_E=e.O()}]);